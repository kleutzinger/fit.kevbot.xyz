<a href="/">go back</a>
<div hx-trigger="load" hx-get="/user-info" hx-swap="innerHTML"></div>
<h1>EDIT {{endpoint}}</h1>
<h2>warning: you are modifying the database!</h2>
<p id="output">output goes here</p>
{{#each columns}} {{this.key}} {{/each}}
<div>
  {{#each items as |item|}}
  <form
    id="form-{{item.id}}"
    hx-post="/update-{{../endpoint}}"
    hx-target="#output"
    hx-swap="innerHTML"
  >
    {{#each ../columns as |column|}}
    <input
      type="text"
      {{column.readonly}}
      id="{{column.key}}"
      name="{{column.key}}"
      autocomplete="off"
      value="{{lookup item column.key}}"
    />
    {{/each}}
    <button>submit update</button>
  </form>
  <button
    class="inline-flex"
    hx-post="/delete-{{../endpoint}}?id={{item.id}}"
    hx-swap="outerHTML"
    hx-target="#form-{{item.id}}"
  >
    delete {{item.id}}
  </button>
  {{/each}}
</div>
